'use strict';

var pkg = require(process.env.PWD + '/package');

var _require = require('./utils');

var decorateSeneca = _require.decorateSeneca;
var createSenecaLogger = _require.createSenecaLogger;


module.exports = function () {
  var baseConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};


  var extendedConfig = {};
  var customLogger = baseConfig.customLogger || require('./logger')({
    name: pkg.name,
    version: pkg.version,
    level: baseConfig.logLevel || 'debug'
  });

  // rewrite default seneca logger
  extendedConfig.internal = extendedConfig.internal || {};
  extendedConfig.internal.logger = createSenecaLogger(customLogger);

  var config = Object.assign({}, baseConfig, extendedConfig);
  delete config.customLogger;

  var seneca = require('seneca')(config);

  // append additional methods (promisified actions, error emitters, clean loggers etc)
  var customSeneca = decorateSeneca(seneca, customLogger);

  return customSeneca;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJwa2ciLCJyZXF1aXJlIiwicHJvY2VzcyIsImVudiIsIlBXRCIsImRlY29yYXRlU2VuZWNhIiwiY3JlYXRlU2VuZWNhTG9nZ2VyIiwibW9kdWxlIiwiZXhwb3J0cyIsImJhc2VDb25maWciLCJleHRlbmRlZENvbmZpZyIsImN1c3RvbUxvZ2dlciIsIm5hbWUiLCJ2ZXJzaW9uIiwibGV2ZWwiLCJsb2dMZXZlbCIsImludGVybmFsIiwibG9nZ2VyIiwiY29uZmlnIiwiT2JqZWN0IiwiYXNzaWduIiwic2VuZWNhIiwiY3VzdG9tU2VuZWNhIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLE1BQU1DLFFBQVdDLFFBQVFDLEdBQVIsQ0FBWUMsR0FBdkIsY0FBWjs7ZUFDK0NILFFBQVEsU0FBUixDOztJQUF2Q0ksYyxZQUFBQSxjO0lBQWdCQyxrQixZQUFBQSxrQjs7O0FBRXhCQyxPQUFPQyxPQUFQLEdBQWlCLFlBQXFCO0FBQUEsTUFBcEJDLFVBQW9CLHVFQUFQLEVBQU87OztBQUVwQyxNQUFNQyxpQkFBaUIsRUFBdkI7QUFDQSxNQUFNQyxlQUFlRixXQUFXRSxZQUFYLElBQTJCVixRQUFRLFVBQVIsRUFBb0I7QUFDbEVXLFVBQU1aLElBQUlZLElBRHdEO0FBRWxFQyxhQUFTYixJQUFJYSxPQUZxRDtBQUdsRUMsV0FBT0wsV0FBV00sUUFBWCxJQUF1QjtBQUhvQyxHQUFwQixDQUFoRDs7QUFNQTtBQUNBTCxpQkFBZU0sUUFBZixHQUEwQk4sZUFBZU0sUUFBZixJQUEyQixFQUFyRDtBQUNBTixpQkFBZU0sUUFBZixDQUF3QkMsTUFBeEIsR0FBaUNYLG1CQUFtQkssWUFBbkIsQ0FBakM7O0FBRUEsTUFBTU8sU0FBU0MsT0FBT0MsTUFBUCxDQUFjLEVBQWQsRUFBa0JYLFVBQWxCLEVBQThCQyxjQUE5QixDQUFmO0FBQ0EsU0FBT1EsT0FBT1AsWUFBZDs7QUFFQSxNQUFNVSxTQUFTcEIsUUFBUSxRQUFSLEVBQWtCaUIsTUFBbEIsQ0FBZjs7QUFFQTtBQUNBLE1BQU1JLGVBQWVqQixlQUFlZ0IsTUFBZixFQUF1QlYsWUFBdkIsQ0FBckI7O0FBRUEsU0FBT1csWUFBUDtBQUNELENBdEJEIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGtnID0gcmVxdWlyZShgJHtwcm9jZXNzLmVudi5QV0R9L3BhY2thZ2VgKVxuY29uc3QgeyBkZWNvcmF0ZVNlbmVjYSwgY3JlYXRlU2VuZWNhTG9nZ2VyIH0gPSByZXF1aXJlKCcuL3V0aWxzJylcblxubW9kdWxlLmV4cG9ydHMgPSAoYmFzZUNvbmZpZyA9IHt9KSA9PiB7XG5cbiAgY29uc3QgZXh0ZW5kZWRDb25maWcgPSB7fVxuICBjb25zdCBjdXN0b21Mb2dnZXIgPSBiYXNlQ29uZmlnLmN1c3RvbUxvZ2dlciB8fCByZXF1aXJlKCcuL2xvZ2dlcicpKHtcbiAgICBuYW1lOiBwa2cubmFtZSxcbiAgICB2ZXJzaW9uOiBwa2cudmVyc2lvbixcbiAgICBsZXZlbDogYmFzZUNvbmZpZy5sb2dMZXZlbCB8fCAnZGVidWcnXG4gIH0pXG5cbiAgLy8gcmV3cml0ZSBkZWZhdWx0IHNlbmVjYSBsb2dnZXJcbiAgZXh0ZW5kZWRDb25maWcuaW50ZXJuYWwgPSBleHRlbmRlZENvbmZpZy5pbnRlcm5hbCB8fCB7fVxuICBleHRlbmRlZENvbmZpZy5pbnRlcm5hbC5sb2dnZXIgPSBjcmVhdGVTZW5lY2FMb2dnZXIoY3VzdG9tTG9nZ2VyKVxuXG4gIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGJhc2VDb25maWcsIGV4dGVuZGVkQ29uZmlnKVxuICBkZWxldGUgY29uZmlnLmN1c3RvbUxvZ2dlclxuXG4gIGNvbnN0IHNlbmVjYSA9IHJlcXVpcmUoJ3NlbmVjYScpKGNvbmZpZylcblxuICAvLyBhcHBlbmQgYWRkaXRpb25hbCBtZXRob2RzIChwcm9taXNpZmllZCBhY3Rpb25zLCBlcnJvciBlbWl0dGVycywgY2xlYW4gbG9nZ2VycyBldGMpXG4gIGNvbnN0IGN1c3RvbVNlbmVjYSA9IGRlY29yYXRlU2VuZWNhKHNlbmVjYSwgY3VzdG9tTG9nZ2VyKVxuXG4gIHJldHVybiBjdXN0b21TZW5lY2Fcbn1cbiJdfQ==